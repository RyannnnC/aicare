{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nvar _jsxFileName = \"F:\\\\Github\\\\aicare\\\\Scene\\\\login.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from 'react';\nimport SafeAreaView from \"react-native-web/dist/exports/SafeAreaView\";\nimport Platform from \"react-native-web/dist/exports/Platform\";\nimport KeyboardAvoidingView from \"react-native-web/dist/exports/KeyboardAvoidingView\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Switch from \"react-native-web/dist/exports/Switch\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport { styles } from \"../style\";\nimport DataContext from \"../providerContext\";\nimport I18n from \"./switchLanguage\";\n\nvar Login = function (_Component) {\n  _inherits(Login, _Component);\n\n  var _super = _createSuper(Login);\n\n  function Login(props) {\n    var _this;\n\n    _classCallCheck(this, Login);\n\n    _this = _super.call(this, props);\n    _this.state = {\n      info: \"\",\n      password: \"\",\n      email: false,\n      mobile: true\n    };\n    return _this;\n  }\n\n  _createClass(Login, [{\n    key: \"loginRequest\",\n    value: function loginRequest() {\n      var _this2 = this;\n\n      var s = this.state;\n\n      if (s.info.length === 0) {\n        Alert.alert(\"Enter a valid phone or email\");\n        return false;\n      } else if (s.password.length === 0) {\n        Alert.alert(\"Enter a password\");\n        return false;\n      }\n\n      if (this.state.mobile) {\n        var url = 'http://3.104.87.14:8084/aicare-business-api/business/user/login?' + 'loginName=' + s.info + '&passWord=' + s.password + '&appType=1' + '&loginType=mobile';\n        fetch(url, {\n          method: 'POST',\n          headers: {\n            'Accept': 'application/json',\n            'Content-Type': 'application/json'\n          }\n        }).then(function (response) {\n          return response.json();\n        }).then(function (json) {\n          if (json.code === 0) {\n            _this2.context.action.changeLogin(true);\n\n            _this2.context.action.changetoken(json.data);\n\n            if (json.roleType == '2') {\n              _this2.context.action.changeemployerid(json.employerId);\n\n              console.log(_this2.context.emplyerId);\n            }\n\n            console.log(Platform);\n          } else {\n            Alert.alert(\"Invalid username or password\");\n            return false;\n          }\n        });\n      } else {\n        var _url = 'http://3.104.87.14:8084/aicare-business-api/business/user/login?' + 'loginName=' + s.info + '&passWord=' + s.password + '&appType=1' + '&loginType=email';\n\n        fetch(_url, {\n          method: 'POST',\n          headers: {\n            'Accept': 'application/json',\n            'Content-Type': 'application/json'\n          }\n        }).then(function (response) {\n          return response.json();\n        }).then(function (json) {\n          if (json.code === 0) {\n            console.log(\"login success\");\n\n            _this2.context.action.changeLogin(true);\n\n            _this2.context.action.changetoken(json.data);\n\n            if (json.roleType == '2') {\n              _this2.context.action.changeemployerid(json.employerId);\n\n              console.log(_this2.context.emplyerId);\n            }\n\n            console.log(Platform);\n          } else {\n            Alert.alert(\"Invalid username or password\");\n            return false;\n          }\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      return React.createElement(KeyboardAvoidingView, {\n        style: {\n          flex: 1\n        },\n        behavior: Platform.OS === \"ios\" ? \"padding\" : \"height\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 5\n        }\n      }, React.createElement(View, {\n        style: styles.container,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 5\n        }\n      }, React.createElement(Image, {\n        style: styles.img3,\n        source: require(\"../images/providerImg/login_img_1.png\"),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 7\n        }\n      }), this.state.mobile && React.createElement(View, {\n        style: {\n          marginTop: 50,\n          borderBottomWidth: 1,\n          borderBottomColor: '#BBBBBB'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 9\n        }\n      }, React.createElement(View, {\n        style: {\n          marginBottom: 10,\n          flexDirection: 'row'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 11\n        }\n      }, React.createElement(Image, {\n        style: {\n          width: 20,\n          height: 20,\n          marginRight: 10\n        },\n        source: require(\"../images/providerImg/login_icon_account.png\"),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 13\n        }\n      }), React.createElement(Text, {\n        style: {\n          fontSize: 18,\n          fontWeight: '500',\n          color: '#333333'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 13\n        }\n      }, I18n.t('account')), React.createElement(TouchableOpacity, {\n        style: {\n          marginLeft: 150\n        },\n        onPress: function onPress() {\n          _this3.setState({\n            email: true,\n            mobile: false\n          });\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 13\n        }\n      }, React.createElement(Text, {\n        style: {\n          color: 'blue'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 15\n        }\n      }, \"\\u90AE\\u7BB1\\u767B\\u9646\"))), React.createElement(TextInput, {\n        style: styles.account,\n        placeholder: \"04********\",\n        onChangeText: function onChangeText(text) {\n          _this3.setState({\n            info: text\n          });\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 11\n        }\n      })), this.state.email && React.createElement(View, {\n        style: {\n          marginTop: 50,\n          borderBottomWidth: 1,\n          borderBottomColor: '#BBBBBB'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 11\n        }\n      }, React.createElement(View, {\n        style: {\n          marginBottom: 10,\n          flexDirection: 'row'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 13\n        }\n      }, React.createElement(Image, {\n        style: {\n          width: 20,\n          height: 20,\n          marginRight: 10\n        },\n        source: require(\"../images/providerImg/login_icon_account.png\"),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 15\n        }\n      }), React.createElement(Text, {\n        style: {\n          fontSize: 18,\n          fontWeight: '500',\n          color: '#333333'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 15\n        }\n      }, I18n.t('account')), React.createElement(TouchableOpacity, {\n        style: {\n          marginLeft: 150\n        },\n        onPress: function onPress() {\n          _this3.setState({\n            email: false,\n            mobile: true\n          });\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 15\n        }\n      }, React.createElement(Text, {\n        style: {\n          color: 'blue'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 17\n        }\n      }, \"\\u624B\\u673A\\u767B\\u9646\"))), React.createElement(TextInput, {\n        style: styles.account,\n        placeholder: \"xxxxx@gmail.com\",\n        onChangeText: function onChangeText(text) {\n          _this3.setState({\n            info: text\n          });\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 13\n        }\n      })), React.createElement(View, {\n        style: {\n          marginTop: 25,\n          borderBottomWidth: 1,\n          borderBottomColor: '#BBBBBB'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 7\n        }\n      }, React.createElement(View, {\n        style: {\n          marginBottom: 10,\n          flexDirection: 'row'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 9\n        }\n      }, React.createElement(Image, {\n        style: {\n          width: 20,\n          height: 20,\n          marginRight: 10\n        },\n        source: require(\"../images/providerImg/login_icon_pswd.png\"),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 11\n        }\n      }), React.createElement(Text, {\n        style: {\n          fontSize: 18,\n          fontWeight: '500',\n          color: '#333333'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 11\n        }\n      }, I18n.t('password'))), React.createElement(TextInput, {\n        style: styles.password,\n        secureTextEntry: true,\n        onChangeText: function onChangeText(text) {\n          _this3.setState({\n            password: text\n          });\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 9\n        }\n      })), React.createElement(View, {\n        style: styles.container2,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 7\n        }\n      }, React.createElement(TouchableOpacity, {\n        style: styles.f_wrapper,\n        onPress: function onPress() {\n          return _this3.props.navigation.navigate('忘记密码');\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 9\n        }\n      }, React.createElement(Text, {\n        style: styles.f_Text,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 11\n        }\n      }, I18n.t('forgotPassword'))), React.createElement(TouchableOpacity, {\n        style: styles.z_wrapper,\n        onPress: function onPress() {\n          return _this3.props.navigation.navigate('注册');\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 9\n        }\n      }, React.createElement(Text, {\n        style: styles.r_Text,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 11\n        }\n      }, I18n.t('signup')))), React.createElement(TouchableOpacity, {\n        style: styles.loginWrapper,\n        onPress: function onPress() {\n          return _this3.loginRequest();\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 7\n        }\n      }, React.createElement(Text, {\n        style: styles.onsite_Text,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 9\n        }\n      }, I18n.t('login'))), React.createElement(Image, {\n        style: styles.img4,\n        source: require(\"../images/logo.png\"),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 7\n        }\n      })));\n    }\n  }]);\n\n  return Login;\n}(Component);\n\nexport { Login as default };\nLogin.contextType = DataContext;","map":{"version":3,"sources":["F:/Github/aicare/Scene/login.js"],"names":["React","Component","styles","DataContext","I18n","Login","props","state","info","password","email","mobile","s","length","Alert","alert","url","fetch","method","headers","then","response","json","code","context","action","changeLogin","changetoken","data","roleType","changeemployerid","employerId","console","log","emplyerId","Platform","flex","OS","container","img3","require","marginTop","borderBottomWidth","borderBottomColor","marginBottom","flexDirection","width","height","marginRight","fontSize","fontWeight","color","t","marginLeft","setState","account","text","container2","f_wrapper","navigation","navigate","f_Text","z_wrapper","r_Text","loginWrapper","loginRequest","onsite_Text","img4","contextType"],"mappings":"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","sourcesContent":["import React,{Component} from 'react';\r\nimport { SafeAreaView,Platform,KeyboardAvoidingView,Text, Button, View, Alert, Image,TouchableOpacity,Switch,TextInput } from 'react-native';\r\nimport {styles} from '../style';\r\nimport DataContext from \"../providerContext\";\r\nimport I18n from './switchLanguage';\r\n\r\nexport default class Login extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      info:\"\",\r\n      password:\"\",\r\n      email:false,\r\n      mobile:true,\r\n    }\r\n  }\r\n\r\n  loginRequest() {\r\n    let s = this.state;\r\n    if (s.info.length === 0) {\r\n        Alert.alert(\"Enter a valid phone or email\");\r\n        return false;\r\n    } else if (s.password.length === 0) {\r\n        Alert.alert(\"Enter a password\");\r\n        return false;\r\n    }\r\n    if (this.state.mobile) {\r\n    let url = 'http://3.104.87.14:8084/aicare-business-api/business/user/login?'\r\n    +'loginName='+ s.info\r\n    +'&passWord=' + s.password\r\n    +'&appType=1'\r\n    +'&loginType=mobile'\r\n    fetch(url,{\r\n      method: 'POST',\r\n      headers: {\r\n      'Accept':       'application/json',\r\n      'Content-Type': 'application/json',\r\n      }\r\n    })\r\n    .then((response) => response.json())\r\n    .then((json) =>  {\r\n        if (json.code === 0) {\r\n          this.context.action.changeLogin(true);\r\n          this.context.action.changetoken(json.data);\r\n          if (json.roleType == '2') {\r\n            this.context.action.changeemployerid(json.employerId);\r\n            console.log(this.context.emplyerId)\r\n          }\r\n          console.log(Platform)\r\n        } else {\r\n          Alert.alert(\"Invalid username or password\");\r\n          return false;\r\n        }\r\n    })} else {\r\n      let url = 'http://3.104.87.14:8084/aicare-business-api/business/user/login?'\r\n      +'loginName='+ s.info\r\n      +'&passWord=' + s.password\r\n      +'&appType=1'\r\n      +'&loginType=email'\r\n      fetch(url,{\r\n        method: 'POST',\r\n        headers: {\r\n        'Accept':       'application/json',\r\n        'Content-Type': 'application/json',\r\n        }\r\n      })\r\n      .then((response) => response.json())\r\n      .then((json) =>  {\r\n          if (json.code === 0) {\r\n            console.log(\"login success\");\r\n            this.context.action.changeLogin(true);\r\n            this.context.action.changetoken(json.data);\r\n            if (json.roleType == '2') {\r\n              this.context.action.changeemployerid(json.employerId);\r\n              console.log(this.context.emplyerId)\r\n            }\r\n            console.log(Platform)\r\n          } else {\r\n            Alert.alert(\"Invalid username or password\");\r\n            return false;\r\n          }\r\n      })\r\n    }\r\n  }\r\n\r\n  render(){\r\n  return (\r\n    <KeyboardAvoidingView\r\n    style={{flex:1}}\r\n    behavior={Platform.OS === \"ios\" ? \"padding\" : \"height\"}>\r\n    <View style={styles.container}>\r\n      <Image style = {styles.img3}\r\n        source = {require('../images/providerImg/login_img_1.png')}\r\n      />\r\n      {this.state.mobile && (\r\n        <View style={{marginTop:50,borderBottomWidth:1,borderBottomColor:'#BBBBBB'}}>\r\n          <View style={{marginBottom:10,flexDirection:'row'}}>\r\n            <Image\r\n              style = {{width:20,height:20,marginRight:10}}\r\n              source = {require('../images/providerImg/login_icon_account.png')}\r\n            />\r\n            <Text style={{ fontSize:18, fontWeight: '500', color: '#333333' }}>{I18n.t('account')}</Text>\r\n            <TouchableOpacity style={{marginLeft:150}} onPress={() => {this.setState({email:true,mobile:false})}}>\r\n              <Text style={{color:'blue'}}>邮箱登陆</Text>\r\n            </TouchableOpacity>\r\n          </View>\r\n          <TextInput\r\n            style = {styles.account}\r\n            placeholder=\"04********\"\r\n            onChangeText={(text) => {this.setState({ info: text})}}\r\n          />\r\n        </View>)}\r\n        {this.state.email && (\r\n          <View style={{marginTop:50,borderBottomWidth:1,borderBottomColor:'#BBBBBB'}}>\r\n            <View style={{marginBottom:10,flexDirection:'row'}}>\r\n              <Image\r\n                style = {{width:20,height:20,marginRight:10}}\r\n                source = {require('../images/providerImg/login_icon_account.png')}\r\n              />\r\n              <Text style={{ fontSize:18, fontWeight: '500', color: '#333333' }}>{I18n.t('account')}</Text>\r\n              <TouchableOpacity style={{marginLeft:150}} onPress={() => {this.setState({email:false,mobile:true})}}>\r\n                <Text style={{color:'blue'}}>手机登陆</Text>\r\n              </TouchableOpacity>\r\n            </View>\r\n            <TextInput\r\n              style = {styles.account}\r\n              placeholder=\"xxxxx@gmail.com\"\r\n              onChangeText={(text) => {this.setState({ info: text})}}\r\n            />\r\n          </View>)}\r\n      <View style={{marginTop:25,borderBottomWidth:1,borderBottomColor:'#BBBBBB'}}>\r\n        <View style={{marginBottom:10,flexDirection:'row'}}>\r\n          <Image\r\n            style = {{width:20,height:20,marginRight:10}}\r\n            source = {require('../images/providerImg/login_icon_pswd.png')}\r\n          />\r\n          <Text style={{ fontSize:18, fontWeight: '500', color: '#333333' }}>{I18n.t('password')}</Text>\r\n        </View>\r\n        <TextInput\r\n        style = {styles.password}\r\n        secureTextEntry={true}\r\n        onChangeText={(text) => {this.setState({ password: text})}}\r\n        />\r\n      </View>\r\n\r\n      <View style ={styles.container2}>\r\n        <TouchableOpacity style={styles.f_wrapper} onPress={() => this.props.navigation.navigate('忘记密码')}>\r\n          <Text style={styles.f_Text}>{I18n.t('forgotPassword')}</Text>\r\n        </TouchableOpacity>\r\n        <TouchableOpacity style={styles.z_wrapper} onPress={() => this.props.navigation.navigate('注册')}>\r\n          <Text style={styles.r_Text}>{I18n.t('signup')}</Text>\r\n        </TouchableOpacity>\r\n      </View>\r\n      <TouchableOpacity style={styles.loginWrapper} onPress = {()=>this.loginRequest()}>\r\n        <Text style={styles.onsite_Text}>{I18n.t('login')}</Text>\r\n      </TouchableOpacity>\r\n      <Image style = {styles.img4}\r\n        source = {require('../images/logo.png')}\r\n      />\r\n    </View>\r\n    </KeyboardAvoidingView>\r\n  );}\r\n}\r\n\r\nLogin.contextType = DataContext;\r\n"]},"metadata":{},"sourceType":"module"}